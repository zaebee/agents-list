# Our CRM AI - Enhanced

This project is a sophisticated, AI-powered command-line interface (CLI) for managing tasks in a YouGile project. It leverages a suite of specialized AI agents to automate task analysis, suggest owners, and streamline project management workflows.

## Key Features

- **Intelligent Task Creation**: Automatically suggests the best AI agent to own a task based on its title and description.
- **PM Agent Gateway**: For complex tasks, a Project Manager agent can analyze requirements, decompose them into subtasks, and create a full execution plan.
- **Comprehensive Task Management**: Full CRUD (Create, Read, Update, Delete) operations for tasks, including moving them between columns, and commenting.
- **Direct YouGile Integration**: Uses the YouGile API as a backend for robust project management.
- **Secure and Robust**: Includes features like API call retries with exponential backoff and validation to prevent injection attacks.

## Files

- `crm_enhanced.py`: The main CLI tool for managing tasks.
- `crm_setup_enhanced.py`: A one-time script to initialize the project structure in YouGile.
- `agent_selector.py`: The logic for suggesting agents based on keywords.
- `pm_agent_gateway.py`: The advanced logic for the Project Manager agent.
- `config.json`: A configuration file that stores the IDs of the YouGile project, board, and columns. (Generated by `crm_setup_enhanced.py`)
- `requirements.txt`: A list of Python dependencies for this project.

## Prerequisites

- Python 3.7+
- pip
- Docker and Docker Compose (for the Web UI)

## Setup Instructions

1.  **Set Environment Variable:**
    This tool requires a YouGile API key. You need to set it as an environment variable named `YOUGILE_API_KEY`.

    ```bash
    export YOUGILE_API_KEY="your_api_key_here"
    ```
    Replace `"your_api_key_here"` with the key you generated from your YouGile account.

2.  **Install Dependencies:**
    Navigate to the `our-crm-ai` directory and install the required Python libraries.
    ```bash
    pip install -r requirements.txt
    ```

3.  **Run Initial Setup:**
    Before using the CRM, you need to run the setup script once to create the project structure in YouGile. This script will create a project, board, columns, and all the necessary agent "stickers" in YouGile.
    ```bash
    python3 crm_setup_enhanced.py
    ```
    This will also create the `config.json` file.

## Usage Instructions

All commands are run using the `crm_enhanced.py` script.

### Create a Task
Creates a new task. If no owner is specified, the system will analyze the task and suggest the best AI agent for the job.

**Command:**
```bash
python3 crm_enhanced.py create --title "<task_title>" --description "<task_description>" [--owner <agent_name>] [--no-ai-suggest]
```

**Examples:**
```bash
# Create a task and let the AI suggest an owner
python3 crm_enhanced.py create --title "Review new feature" --description "Review the latest code submission for the AI owner feature."

# Create a task and assign a specific owner
python3 crm_enhanced.py create --title "Design MCP for Agent Communication" --owner "api-documenter"
```

### Analyze a Task with the PM Agent
For complex tasks, use the `pm` command to have the PM Agent Gateway analyze it. The gateway will assess complexity, recommend a strategic approach, and can break the task down into a sequence of subtasks assigned to different agents.

**Command:**
```bash
python3 crm_enhanced.py pm --title "<task_title>" --description "<task_description>"
```

**Example:**
```bash
python3 crm_enhanced.py pm --title "Build a full e-commerce platform" --description "The platform needs user auth, product catalog, a shopping cart, and payment integration."
```

### List Tasks
Lists all tasks on the board, grouped by their status (column).

**Command:**
```bash
python3 crm_enhanced.py list
```

### View a Task
Shows the detailed description, owner, and all comments for a specific task.

**Command:**
```bash
python3 crm_enhanced.py view <task_id>
```

### Update a Task
Updates an existing task. Currently, this supports changing the AI Owner.

**Command:**
```bash
python3 crm_enhanced.py update <task_id> --owner <new_agent_name>
```

### Other Commands

- **`comment <task_id> --message "<...>`**: Add a comment to a task.
- **`move <task_id> --column "<...>`**: Move a task to a different column (e.g., "In Progress", "Done").
- **`agents`**: List all available AI agents in the system.
- **`suggest "<description>"`**: Get AI agent suggestions for a task without creating it.

---
This updated README provides a more accurate overview of the enhanced AI-CRM's capabilities.